/* Creazione del database */

CREATE DATABASE Autontheline;

CREATE TABLE Account(
   id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   saldo DOUBLE PRECISION
);

CREATE TABLE Buyer(
   id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   nome VARCHAR(128),
   cognome VARCHAR(128),
   username VARCHAR(128),
   password VARCHAR(128),
   id_conto INTEGER,
   FOREIGN KEY (id_conto) REFERENCES Account(id)
);

CREATE TABLE Seller(
   id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   nome VARCHAR(128),
   cognome VARCHAR(128),
   username VARCHAR(128),
   password VARCHAR(128),
   id_conto INTEGER,
   FOREIGN KEY (id_conto) REFERENCES Account(id)
);

CREATE TABLE CarSale(
   id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   nomeAuto VARCHAR(128),
   urlImmagine VARCHAR(128),
   descrizione VARCHAR(8192),
   prezzoUnitario DOUBLE PRECISION,
   quantita INTEGER,
   id_venditore INTEGER,
   FOREIGN KEY (id_venditore) REFERENCES Seller(id)
);


/* Popolamento */

INSERT INTO Account (id, saldo)
VALUES (1, 100.0), (2, 230.0), (3, 150.0), (4, 10000.0), (5, 0.0);

INSERT INTO Seller (id, nome, cognome, username, password, id_conto)
VALUES (1, 'Mario', 'Rossi', 'MarioRossi', '000', 1),
       (2, 'Elisa', 'Farris', 'ElisaFarris', '111', 2),
	   (3, 'Luciano', 'Loi', 'LucianoLoi', '222', 3);
	 
INSERT INTO Buyer (id, nome, cognome, username, password, id_conto)
VALUES (1, 'Selima', 'Curci', 'SelimaCurci', '333', 4),
       (2, 'Giulia', 'Lisci', 'GiuliaLisci', '444', 5);	 

INSERT INTO CarSale (id, nomeAuto, urlImmagine, descrizione, prezzoUnitario, quantita, id_venditore)
VALUES (default, 'Aixam GTO', 'Images/Aixam_GTO.png', '...', 12650, 1, 1),
       (default, 'BorgWard bx7', 'Images/borgward_bx7.jpg', '...', 15000, 4, 1),
	   (default, 'Chery Tiggo', 'Images/Chery_tiggo.jpg', '...', 9500, 2, 1),
	   (default, 'ChinaBike Cross125', 'Images/chinabike_cross125.jpg', '...', 750, 3, 1),
	   (default, 'Fisker Karma', 'Images/fisker-karma.jpg', '...', 125000, 1, 1),
	   (default, 'Horex vr6', 'Images/HOREX_vr6.jpg', '...', 30000, 3, 2),
	   (default, 'Isorivolta Grifo90', 'Images/ISORIVOLTA_grifo_90.jpg', '...', 70000, 1, 2),
	   (default, 'Panda 4x4 Sisley', 'Images/panda4x4_sisley.jpg', '...', 5600, 1, 2);
